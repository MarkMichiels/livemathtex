---
phase: 03-api-features
plan: 01
type: execute
---

<objective>
Expose public Python API in `__init__.py` for library usage.

Purpose: Enable programmatic usage of LiveMathTeX as a Python library, not just as a CLI tool.
Output: Updated `__init__.py` with public exports, updated documentation with library usage examples.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/ISSUES.md (ISS-010)

# Codebase context
@.planning/codebase/ARCHITECTURE.md
@.planning/codebase/CONVENTIONS.md

# Current implementation
@src/livemathtex/__init__.py
@src/livemathtex/core.py
@src/livemathtex/config.py
@src/livemathtex/ir/schema.py

**From ISSUES.md ISS-010:**
- Currently only `main()` is exported
- Should expose: `process_text()`, `LivemathConfig`, `LivemathIR`
- Files to change: `__init__.py`, possibly `core.py`, README.md, docs/USAGE.md

**Existing functions in core.py:**
- `process_file()` - file-based processing
- `process_text()` - string-based processing (v2.0 IR)
- `process_text_v3()` - string-based processing (v3.0 IR)

**API design decision:**
- Export `process_text()` as the primary API (simple, returns tuple)
- Export `LivemathConfig` for configuration
- Export `LivemathIR` and `LivemathIRV3` for result inspection
- Keep `main()` for CLI entry point
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add public exports to __init__.py</name>
  <files>src/livemathtex/__init__.py</files>
  <action>
Update `__init__.py` to export:
- `process_text` from `.core` (primary API)
- `process_text_v3` from `.core` (v3.0 API)
- `process_file` from `.core` (file-based API)
- `LivemathConfig` from `.config`
- `LivemathIR` from `.ir`
- `LivemathIRV3` from `.ir.schema`
- `main` (keep existing)
- `__version__` (keep existing)
- `__all__` list for explicit public API

Follow convention: named exports, relative imports.
  </action>
  <verify>
```bash
cd /home/mark/Repositories/livemathtex
source venv/bin/activate
python -c "from livemathtex import process_text, LivemathConfig, LivemathIR; print('Imports OK')"
python -c "from livemathtex import __all__; print('Public API:', __all__)"
```
  </verify>
  <done>All public exports importable from `livemathtex` package, `__all__` defined</done>
</task>

<task type="auto">
  <name>Task 2: Add library usage section to README.md</name>
  <files>README.md</files>
  <action>
Add a "Library Usage" section after the "Install & run" section with:
- Simple example of `process_text()` usage
- Show how to access results and IR
- Link to docs/USAGE.md for more details

Keep it concise (5-10 lines of example code). Focus on the most common use case.
  </action>
  <verify>
```bash
grep -A 20 "Library Usage" /home/mark/Repositories/livemathtex/README.md
```
  </verify>
  <done>README.md contains Library Usage section with working example</done>
</task>

<task type="auto">
  <name>Task 3: Add library usage section to docs/USAGE.md</name>
  <files>docs/USAGE.md</files>
  <action>
Add a "Library Usage (Python API)" section near the top (after "Quick Reference") with:
- Full API documentation
- `process_text()` signature and parameters
- `process_text_v3()` for v3.0 IR
- `process_file()` for file-based processing
- `LivemathConfig` configuration options
- `LivemathIR` / `LivemathIRV3` result structures
- Multiple examples showing different use cases:
  1. Basic text processing
  2. Processing with custom config
  3. Accessing symbol values from IR
  4. Error handling

Include type hints and docstring-style documentation.
  </action>
  <verify>
```bash
grep -A 5 "Library Usage" /home/mark/Repositories/livemathtex/docs/USAGE.md
```
  </verify>
  <done>docs/USAGE.md contains comprehensive Library Usage section</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `python -c "from livemathtex import process_text, LivemathConfig, LivemathIR"` succeeds
- [ ] `python -c "from livemathtex import __all__; print(__all__)"` shows all public exports
- [ ] README.md contains Library Usage section
- [ ] docs/USAGE.md contains Library Usage section with API documentation
- [ ] Existing tests still pass: `pytest tests/ -x -q`
</verification>

<success_criteria>

- All public API exports work from `livemathtex` package
- `__all__` explicitly lists public API
- README.md documents basic library usage
- docs/USAGE.md provides comprehensive API documentation
- No breaking changes to existing functionality
</success_criteria>

<output>
After completion, create `.planning/phases/03-api-features/03-01-SUMMARY.md`
</output>
